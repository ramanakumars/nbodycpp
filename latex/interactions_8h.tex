\doxysection{include/interactions.h File Reference}
\hypertarget{interactions_8h}{}\label{interactions_8h}\index{include/interactions.h@{include/interactions.h}}


\doxylink{classParticle}{Particle} interactions including integration and collision handling.  


{\ttfamily \#include "{}global.\+h"{}}\newline
{\ttfamily \#include "{}quadtree.\+h"{}}\newline
{\ttfamily \#include "{}particle.\+h"{}}\newline
Include dependency graph for interactions.\+h\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{interactions_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=348pt]{interactions_8h__dep__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structCollisionInfo}{Collision\+Info}}
\begin{DoxyCompactList}\small\item\em Result of collision prediction between two particles. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classQuadTree}{void}} \mbox{\hyperlink{interactions_8h_a442ab3f0237d06bdddf96b5bb372c031}{transport\+Step}} (\mbox{\hyperlink{classQuadTree_a32ecd5218cb8f164aaaf0eaded7064c9}{std\+::vector}}$<$ \mbox{\hyperlink{classQuadTree_a32ecd5218cb8f164aaaf0eaded7064c9}{std\+::shared\+\_\+ptr}}$<$ \mbox{\hyperlink{classParticle}{Particle}} $>$ $>$ \&particles, \mbox{\hyperlink{classQuadTree}{Quad\+Tree}}$<$ \mbox{\hyperlink{classParticle}{Particle}} $>$ \texorpdfstring{$\ast$}{*}tree, \mbox{\hyperlink{classQuadTree}{double}} \mbox{\hyperlink{classQuadTree}{dt}})
\begin{DoxyCompactList}\small\item\em Perform one integration timestep using selected integrator. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classQuadTree}{void}} \mbox{\hyperlink{interactions_8h_a3e899bb08b8a5d02d97f09baaf33576d}{update\+Particles}} (\mbox{\hyperlink{classQuadTree_a32ecd5218cb8f164aaaf0eaded7064c9}{std\+::vector}}$<$ \mbox{\hyperlink{classQuadTree_a32ecd5218cb8f164aaaf0eaded7064c9}{std\+::shared\+\_\+ptr}}$<$ \mbox{\hyperlink{classParticle}{Particle}} $>$ $>$ \&, \mbox{\hyperlink{classQuadTree}{Quad\+Tree}}$<$ \mbox{\hyperlink{classParticle}{Particle}} $>$ \texorpdfstring{$\ast$}{*}, \mbox{\hyperlink{classQuadTree}{double}})
\begin{DoxyCompactList}\small\item\em Main update function\+: integrate and handle collisions. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classQuadTree}{void}} \mbox{\hyperlink{interactions_8h_a1399432aaf7ba2685aa4eeebb2ba9cc6}{check\+Collisions}} (\mbox{\hyperlink{classQuadTree_a32ecd5218cb8f164aaaf0eaded7064c9}{std\+::vector}}$<$ \mbox{\hyperlink{classQuadTree_a32ecd5218cb8f164aaaf0eaded7064c9}{std\+::shared\+\_\+ptr}}$<$ \mbox{\hyperlink{classParticle}{Particle}} $>$ $>$ \&, \mbox{\hyperlink{classQuadTree}{Quad\+Tree}}$<$ \mbox{\hyperlink{classParticle}{Particle}} $>$ \texorpdfstring{$\ast$}{*}, \mbox{\hyperlink{classQuadTree}{double}} \mbox{\hyperlink{classQuadTree}{dt}})
\begin{DoxyCompactList}\small\item\em Detect and resolve particle collisions. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structCollisionInfo}{Collision\+Info}} \mbox{\hyperlink{interactions_8h_a97537fab4566bf53acdc825abb69a5b2}{predict\+Collision}} (\mbox{\hyperlink{classQuadTree}{const}} \mbox{\hyperlink{classParticle}{Particle}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classQuadTree}{p1}}, \mbox{\hyperlink{classQuadTree}{const}} \mbox{\hyperlink{classParticle}{Particle}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classQuadTree}{p2}}, \mbox{\hyperlink{classQuadTree}{double}} \mbox{\hyperlink{classQuadTree}{dt}})
\begin{DoxyCompactList}\small\item\em Predict if and when two particles will collide. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\doxylink{classParticle}{Particle} interactions including integration and collision handling. 



\doxysubsection{Function Documentation}
\Hypertarget{interactions_8h_a1399432aaf7ba2685aa4eeebb2ba9cc6}\label{interactions_8h_a1399432aaf7ba2685aa4eeebb2ba9cc6} 
\index{interactions.h@{interactions.h}!checkCollisions@{checkCollisions}}
\index{checkCollisions@{checkCollisions}!interactions.h@{interactions.h}}
\doxysubsubsection{\texorpdfstring{checkCollisions()}{checkCollisions()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classQuadTree}{void}} check\+Collisions (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classQuadTree_a32ecd5218cb8f164aaaf0eaded7064c9}{std\+::vector}}$<$ \mbox{\hyperlink{classQuadTree_a32ecd5218cb8f164aaaf0eaded7064c9}{std\+::shared\+\_\+ptr}}$<$ \mbox{\hyperlink{classParticle}{Particle}} $>$ $>$ \&}]{particles,  }\item[{\mbox{\hyperlink{classQuadTree}{Quad\+Tree}}$<$ \mbox{\hyperlink{classParticle}{Particle}} $>$ \texorpdfstring{$\ast$}{*}}]{tree,  }\item[{\mbox{\hyperlink{classQuadTree}{double}}}]{dt }\end{DoxyParamCaption})}



Detect and resolve particle collisions. 

Uses quadtree spatial partitioning and continuous collision detection to find colliding particles. Merges particles via perfectly inelastic collisions, conserving momentum and mass.

Features\+:
\begin{DoxyItemize}
\item Velocity-\/aware search radius
\item Continuous collision detection (accounts for gravitational trajectories)
\item Thread-\/safe with directional merging (ID-\/based)
\item Removes merged particles from simulation
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em particles} & \doxylink{classParticle}{Particle} vector (modified in-\/place) \\
\hline
{\em tree} & \doxylink{classQuadTree}{Quad\+Tree} for spatial queries \\
\hline
{\em dt} & Timestep (for continuous collision detection)\\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
Parallelized with Open\+MP 

Uses race-\/condition prevention via ID ordering 
\end{DoxyNote}
\Hypertarget{interactions_8h_a97537fab4566bf53acdc825abb69a5b2}\label{interactions_8h_a97537fab4566bf53acdc825abb69a5b2} 
\index{interactions.h@{interactions.h}!predictCollision@{predictCollision}}
\index{predictCollision@{predictCollision}!interactions.h@{interactions.h}}
\doxysubsubsection{\texorpdfstring{predictCollision()}{predictCollision()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structCollisionInfo}{Collision\+Info}} predict\+Collision (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classQuadTree}{const}} \mbox{\hyperlink{classParticle}{Particle}} \texorpdfstring{$\ast$}{*}}]{p1,  }\item[{\mbox{\hyperlink{classQuadTree}{const}} \mbox{\hyperlink{classParticle}{Particle}} \texorpdfstring{$\ast$}{*}}]{p2,  }\item[{\mbox{\hyperlink{classQuadTree}{double}}}]{dt }\end{DoxyParamCaption})}



Predict if and when two particles will collide. 

Uses continuous collision detection with gravitational trajectory approximation. Samples the quadratic trajectory (constant acceleration) to find minimum approach distance and collision time.

Trajectory model\+: r(t) = r₀ + v₀\texorpdfstring{$\ast$}{*}t + ½\texorpdfstring{$\ast$}{*}a\texorpdfstring{$\ast$}{*}t²


\begin{DoxyParams}{Parameters}
{\em p1} & First particle \\
\hline
{\em p2} & Second particle \\
\hline
{\em dt} & Timestep to check within \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\doxylink{structCollisionInfo}{Collision\+Info} structure with prediction results
\end{DoxyReturn}
\begin{DoxyNote}{Note}
Uses constant acceleration approximation 

Includes gravitational effects in trajectory 

Samples trajectory at multiple points for accuracy 
\end{DoxyNote}
\Hypertarget{interactions_8h_a442ab3f0237d06bdddf96b5bb372c031}\label{interactions_8h_a442ab3f0237d06bdddf96b5bb372c031} 
\index{interactions.h@{interactions.h}!transportStep@{transportStep}}
\index{transportStep@{transportStep}!interactions.h@{interactions.h}}
\doxysubsubsection{\texorpdfstring{transportStep()}{transportStep()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classQuadTree}{void}} transport\+Step (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classQuadTree_a32ecd5218cb8f164aaaf0eaded7064c9}{std\+::vector}}$<$ \mbox{\hyperlink{classQuadTree_a32ecd5218cb8f164aaaf0eaded7064c9}{std\+::shared\+\_\+ptr}}$<$ \mbox{\hyperlink{classParticle}{Particle}} $>$ $>$ \&}]{particles,  }\item[{\mbox{\hyperlink{classQuadTree}{Quad\+Tree}}$<$ \mbox{\hyperlink{classParticle}{Particle}} $>$ \texorpdfstring{$\ast$}{*}}]{tree,  }\item[{\mbox{\hyperlink{classQuadTree}{double}}}]{dt }\end{DoxyParamCaption})}



Perform one integration timestep using selected integrator. 

Dispatches to the appropriate integrator based on TRANSPORT\+\_\+\+TYPE\+:
\begin{DoxyItemize}
\item YOSHIDA\+: 4th order symplectic integrator
\item RK2\+: 2nd order Runge-\/\+Kutta
\item HERMITE\+: 4th order Hermite predictor-\/corrector
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em particles} & \doxylink{classParticle}{Particle} vector \\
\hline
{\em tree} & \doxylink{classQuadTree}{Quad\+Tree} for force calculation \\
\hline
{\em dt} & Timestep size\\
\hline
\end{DoxyParams}
Perform one integration timestep using selected integrator. \Hypertarget{interactions_8h_a3e899bb08b8a5d02d97f09baaf33576d}\label{interactions_8h_a3e899bb08b8a5d02d97f09baaf33576d} 
\index{interactions.h@{interactions.h}!updateParticles@{updateParticles}}
\index{updateParticles@{updateParticles}!interactions.h@{interactions.h}}
\doxysubsubsection{\texorpdfstring{updateParticles()}{updateParticles()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classQuadTree}{void}} update\+Particles (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classQuadTree_a32ecd5218cb8f164aaaf0eaded7064c9}{std\+::vector}}$<$ \mbox{\hyperlink{classQuadTree_a32ecd5218cb8f164aaaf0eaded7064c9}{std\+::shared\+\_\+ptr}}$<$ \mbox{\hyperlink{classParticle}{Particle}} $>$ $>$ \&}]{particles,  }\item[{\mbox{\hyperlink{classQuadTree}{Quad\+Tree}}$<$ \mbox{\hyperlink{classParticle}{Particle}} $>$ \texorpdfstring{$\ast$}{*}}]{tree,  }\item[{\mbox{\hyperlink{classQuadTree}{double}}}]{dt }\end{DoxyParamCaption})}



Main update function\+: integrate and handle collisions. 

Performs one complete timestep\+:
\begin{DoxyEnumerate}
\item Integrate particle positions/velocities
\item Check and resolve collisions
\item Recenter system to center of mass
\end{DoxyEnumerate}


\begin{DoxyParams}{Parameters}
{\em particles} & \doxylink{classParticle}{Particle} vector \\
\hline
{\em tree} & \doxylink{classQuadTree}{Quad\+Tree} for force calculation \\
\hline
{\em dt} & Timestep size\\
\hline
\end{DoxyParams}
Main update function\+: integrate and handle collisions. 
